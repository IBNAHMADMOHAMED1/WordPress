!function(t){formintorjs.define([],function(){var a=Backbone.View.extend({el:".wpmudev-forminator-forminator-settings, .wpmudev-forminator-forminator-addons",events:{"click .sui-side-tabs label.sui-tab-item input":"sidetabs","click .sui-sidenav .sui-vertical-tab a":"sidenav","change .sui-sidenav select.sui-mobile-nav":"sidenav_select","click .stripe-connect-modal":"open_stripe_connect_modal","click .paypal-connect-modal":"open_paypal_connect_modal","click .forminator-stripe-connect":"connect_stripe","click .disconnect_stripe":"disconnect_stripe","click .forminator-paypal-connect":"connect_paypal","click .disconnect_paypal":"disconnect_paypal","click button.sui-tab-item":"buttonTabs","click .forminator-toggle-unsupported-settings":"show_unsupported_settings","click .forminator-dismiss-unsupported":"hide_unsupported_settings","click button.addons-configure":"open_configure_connect_modal"},initialize:function(){var a=this;if(t(".wpmudev-forminator-forminator-settings").length||t(".wpmudev-forminator-forminator-addons").length){this.$el.find(".forminator-settings-save").submit(function(n){n.preventDefault();var i=t(this),e=i.find(".wpmudev-action-done").data("nonce"),o=i.find(".wpmudev-action-done").data("action"),r=i.find(".wpmudev-action-done").data("title"),d=i.find(".wpmudev-action-done").data("isReload");a.submitForm(t(this),o,e,r,d)});var n=window.location.hash;_.isUndefined(n)||_.isEmpty(n)||this.sidenav_go_to(n.substring(1),!0),this.renderHcaptcha(),this.render("v2"),this.render("v2-invisible"),this.render("v3"),this.captchaTab()}},captchaTab:function(){var a=this.$el.find('input[name="captcha_tab_saved"]');this.$el.find("button.captcha-main-tab").on("click",function(n){n.preventDefault(),a.val(t(this).data("tab-name"))})},render:function(a){var n=this.$el.find("#"+a+"-recaptcha-preview");n.html('<p class="fui-loading-dialog"><i class="sui-icon-loader sui-loading" aria-hidden="true"></i></p>'),t.ajax({url:Forminator.Data.ajaxUrl,type:"POST",data:{action:"forminator_load_recaptcha_preview",captcha:a}}).done(function(t){t.success&&n.html(t.data)})},renderHcaptcha:function(){var a=this.$el.find("#hcaptcha-preview");a.html('<p class="fui-loading-dialog"><i class="sui-icon-loader sui-loading" aria-hidden="true"></i></p>'),t.ajax({url:Forminator.Data.ajaxUrl,type:"POST",data:{action:"forminator_load_hcaptcha_preview"}}).done(function(t){t.success&&a.html(t.data)})},submitForm:function(a,n,i,e,o){var r={},d=this;r.action="forminator_save_"+n+"_popup",r._ajax_nonce=i;var s=a.serialize()+"&"+t.param(r);t.ajax({url:Forminator.Data.ajaxUrl,type:"POST",data:s,beforeSend:function(){a.find(".sui-button").addClass("sui-button-onload")},success:function(t){var i=_.template("<strong>{{ tab }}</strong> {{ Forminator.l10n.commons.update_successfully }}");Forminator.Notification.open("success",i({tab:e}),4e3),"captcha"===n&&($captcha_tab_saved=a.find('input[name="captcha_tab_saved"]').val(),$captcha_tab_saved=""===$captcha_tab_saved?"recaptcha":$captcha_tab_saved,"recaptcha"===$captcha_tab_saved?(d.render("v2"),d.render("v2-invisible"),d.render("v3")):"hcaptcha"===$captcha_tab_saved&&d.renderHcaptcha()),o&&window.location.reload()},error:function(t){Forminator.Notification.open("error",Forminator.l10n.commons.update_unsuccessfull,4e3)}}).always(function(){a.find(".sui-button").removeClass("sui-button-onload")})},sidetabs:function(t){var a=this.$(t.target),n=a.parent("label"),i=a.data("tab-menu"),e=a.closest(".sui-side-tabs"),o=e.find(".sui-tabs-menu .sui-tab-item"),r=o.find("input");a.is("input")&&(o.removeClass("active"),r.removeAttr("checked"),e.find(".sui-tabs-content > div").removeClass("active"),n.addClass("active"),a.prop("checked","checked"),e.find('.sui-tabs-content div[data-tab-content="'+i+'"]').length&&e.find('.sui-tabs-content div[data-tab-content="'+i+'"]').addClass("active"))},sidenav:function(a){var n=t(a.target).data("nav");n&&this.sidenav_go_to(n,!0),a.preventDefault()},sidenav_select:function(a){var n=t(a.target).val();n&&this.sidenav_go_to(n,!0),a.preventDefault()},sidenav_go_to:function(t,a){var n=this.$el.find('a[data-nav="'+t+'"]'),i=n.closest(".sui-vertical-tabs"),e=i.find(".sui-vertical-tab"),o=this.$el.find(".sui-box[data-nav]"),r=this.$el.find('.sui-box[data-nav="'+t+'"]');a&&history.pushState({selected_tab:t},"Global Settings","admin.php?page=forminator-settings&section="+t),e.removeClass("current"),o.hide(),n.parent().addClass("current"),r.show()},open_configure_connect_modal:function(a){var n=t(a.target),i=n.data("action");"stripe-connect-modal"===i?this.open_stripe_connect_modal(a):"paypal-connect-modal"===i&&this.open_paypal_connect_modal(a)},open_stripe_connect_modal:function(a){a.preventDefault();var n=this,i=t(a.target),e=i.data("modalImage"),o=i.data("modalImageX2"),r=i.data("modalTitle"),d=i.data("modalNonce"),s={title:r,image:e,image_x2:o};return Forminator.Stripe_Popup.open(function(){var a=t(this);n.render_stripe_connect_modal_content(a,d,{})},s),!1},render_stripe_connect_modal_content:function(a,n,i){var e=this;i.action="forminator_stripe_settings_modal",i._ajax_nonce=n;a.find(".sui-box-body").html('<p class="fui-loading-modal"><i class="sui-icon-loader sui-loading" aria-hidden="true"></i></p>'),t.post({url:Forminator.Data.ajaxUrl,type:"post",data:i}).done(function(t){if(t&&t.success){a.find(".sui-box-header h3.sui-box-title").show(),a.find(".sui-box-body").html(t.data.html);var i=t.data.buttons;a.find(".sui-box-footer").html(""),_.each(i,function(t){a.find(".sui-box-footer").append(t.markup)}),a.find(".sui-button").removeClass("sui-button-onload"),_.isUndefined(t.data.notification)||_.isUndefined(t.data.notification.type)||_.isUndefined(t.data.notification.text)||_.isUndefined(t.data.notification.duration)||(Forminator.Notification.open(t.data.notification.type,t.data.notification.text,t.data.notification.duration).done(function(){}),e.update_stripe_page(n))}})},update_stripe_page:function(a){var n={action:"forminator_stripe_update_page",_ajax_nonce:a};t.post({url:Forminator.Data.ajaxUrl,type:"get",data:n}).done(function(t){jQuery("#sui-box-stripe").html(t.data),Forminator.Utils.sui_delegate_events(),Forminator.Stripe_Popup.close()})},show_unsupported_settings:function(a){a.preventDefault(),t(".forminator-unsupported-settings").show()},hide_unsupported_settings:function(a){a.preventDefault(),t(".forminator-unsupported-settings").hide()},connect_stripe:function(a){a.preventDefault();var n=t(a.target);n.addClass("sui-button-onload");var i=n.data("nonce"),e=this.$el.find("#forminator-stripe-popup"),o=e.find("form"),r=o.serializeArray(),d={};return t.map(r,function(t,a){d[t.name]=t.value}),d.connect=!0,this.render_stripe_connect_modal_content(e,i,d),!1},buttonTabs:function(t){var a=this.$(t.target),n=a.closest(".sui-tabs"),i=n.find(".sui-tabs-menu .sui-tab-item"),e=n.find(".sui-tabs-content .sui-tab-content");a.is("button")&&(i.removeClass("active"),i.attr("tabindex","-1"),e.attr("hidden",!0),e.removeClass("active"),a.removeAttr("tabindex"),a.addClass("active"),n.find("#"+a.attr("aria-controls")).addClass("active"),n.find("#"+a.attr("aria-controls")).attr("hidden",!1),n.find("#"+a.attr("aria-controls")).removeAttr("hidden")),t.preventDefault()},open_paypal_connect_modal:function(a){a.preventDefault();var n=this,i=t(a.target),e=i.data("modalImage"),o=i.data("modalImageX2"),r=i.data("modalTitle"),d=i.data("modalNonce");return Forminator.Stripe_Popup.open(function(){var a=t(this);n.render_paypal_connect_modal_content(a,d,{})},{title:r,image:e,image_x2:o}),!1},render_paypal_connect_modal_content:function(a,n,i){var e=this;i.action="forminator_paypal_settings_modal",i._ajax_nonce=n,t.post({url:Forminator.Data.ajaxUrl,type:"post",data:i}).done(function(t){if(t&&t.success){a.find(".sui-box-header h3.sui-box-title").show(),a.find(".sui-box-body").html(t.data.html);var i=t.data.buttons;a.find(".sui-box-footer").html(""),_.each(i,function(t){a.find(".sui-box-footer").append(t.markup)}),a.find(".sui-button").removeClass("sui-button-onload"),_.isUndefined(t.data.notification)||_.isUndefined(t.data.notification.type)||_.isUndefined(t.data.notification.text)||_.isUndefined(t.data.notification.duration)||(Forminator.Notification.open(t.data.notification.type,t.data.notification.text,t.data.notification.duration).done(function(){}),e.update_paypal_page(n))}})},update_paypal_page:function(a){var n={action:"forminator_paypal_update_page",_ajax_nonce:a};t.post({url:Forminator.Data.ajaxUrl,type:"get",data:n}).done(function(t){jQuery("#sui-box-paypal").html(t.data),Forminator.Utils.sui_delegate_events(),Forminator.Stripe_Popup.close()})},connect_paypal:function(a){a.preventDefault();var n=t(a.target);n.addClass("sui-button-onload");var i=n.data("nonce"),e=this.$el.find("#forminator-stripe-popup"),o=e.find("form"),r=o.serializeArray(),d={};return t.map(r,function(t,a){d[t.name]=t.value}),d.connect=!0,this.render_paypal_connect_modal_content(e,i,d),!1},disconnect_stripe:function(a){var n=t(a.target),i={action:"forminator_disconnect_stripe",_ajax_nonce:n.data("nonce")};n.addClass("sui-button-onload"),t.post({url:Forminator.Data.ajaxUrl,type:"get",data:i}).done(function(t){jQuery("#sui-box-stripe").html(t.data.html),Forminator.Utils.sui_delegate_events(),Forminator.Stripe_Popup.close(),_.isUndefined(t.data.notification)||_.isUndefined(t.data.notification.type)||_.isUndefined(t.data.notification.text)||_.isUndefined(t.data.notification.duration)||Forminator.Notification.open(t.data.notification.type,t.data.notification.text,t.data.notification.duration).done(function(){})})},disconnect_paypal:function(a){var n=t(a.target),i={action:"forminator_disconnect_paypal",_ajax_nonce:n.data("nonce")};n.addClass("sui-button-onload"),t.post({url:Forminator.Data.ajaxUrl,type:"get",data:i}).done(function(t){jQuery("#sui-box-paypal").html(t.data.html),Forminator.Utils.sui_delegate_events(),Forminator.Stripe_Popup.close(),_.isUndefined(t.data.notification)||_.isUndefined(t.data.notification.type)||_.isUndefined(t.data.notification.text)||_.isUndefined(t.data.notification.duration)||Forminator.Notification.open(t.data.notification.type,t.data.notification.text,t.data.notification.duration).done(function(){})})}}),a=new a;return a})}(jQuery);var forminator_render_admin_captcha=function(){setTimeout(function(){var t=jQuery(".forminator-g-recaptcha"),a=t.data("sitekey"),n=t.data("theme"),i=t.data("size");window.grecaptcha.render(t[0],{sitekey:a,theme:n,size:i})},100)},forminator_render_admin_captcha_v2=function(){setTimeout(function(){var t=jQuery(".forminator-g-recaptcha-v2"),a=t.data("sitekey"),n=t.data("theme"),i=t.data("size");window.grecaptcha.render(t[0],{sitekey:a,theme:n,size:i})},100)},forminator_render_admin_captcha_v2_invisible=function(){setTimeout(function(){var t=jQuery(".forminator-g-recaptcha-v2-invisible"),a=t.data("sitekey"),n=t.data("theme"),i=t.data("size");window.grecaptcha.render(t[0],{sitekey:a,theme:n,size:i,badge:"inline"})},100)},forminator_render_admin_captcha_v3=function(){setTimeout(function(){var t=jQuery(".forminator-g-recaptcha-v3"),a=t.data("sitekey"),n=t.data("theme"),i=t.data("size");window.grecaptcha.render(t[0],{sitekey:a,theme:n,size:i,badge:"inline"})},100)},forminator_render_admin_hcaptcha=function(){setTimeout(function(){var t=jQuery(".forminator-hcaptcha"),a=t.data("sitekey");hcaptcha.render(t[0],{sitekey:a})},1e3)};